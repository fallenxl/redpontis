---
const items: string[] = [
  "Especializados en medios de pago",
  "PaaS enabler para adquirentes y PFs",
  "Soluciones integrales en marca blanca",
  "Desarrollos a medida",
  "Certificaciones PCI DSS / PCI PIN",
  "ISO 9001 / ISO 37001",
];
---

<section id="value-add" class="relative overflow-hidden bg-white">
  <!-- Decor fondo: halo rojo + “R”s de marca -->
  <div class="pointer-events-none absolute inset-0">
    <div class="absolute -top-24 left-1/2 h-[38rem] w-[38rem] -translate-x-1/2 rounded-full bg-[#B41A1D]/10 blur-3xl"></div>
  </div>


  <div class="relative mx-auto max-w-7xl px-4 md:px-6 py-16 md:py-24">
    <header class="max-w-3xl">
      <p class="text-xs md:text-sm uppercase tracking-widest flex items-center gap-2 text-[#575756]">
        <span class="inline-block h-[3px] w-8 rounded bg-[#B41A1D]"></span> Valor agregado
      </p>
      <h2 class="heavitas mt-2 text-3xl md:text-5xl leading-tight text-[#121212]">
        Más que pagos: <span class="text-[#B41A1D]">una experiencia completa</span>
      </h2>
      <p class="mt-3 text-[#575756] md:text-lg">
        Ofrecemos servicios y herramientas que potencian cada transacción, mejorando la eficiencia
        operativa y la experiencia del usuario.
      </p>
    </header>

    <!-- Cards -->
    <ul class="mt-10 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5">
      {items.map((t) => (
        <li class="va-card group relative overflow-hidden rounded-2xl bg-white p-5 shadow-sm ring-1 ring-black/5 transition hover:-translate-y-1 hover:shadow-lg">
          <!-- borde superior animado -->
          <div class="absolute inset-x-0 top-0 h-1 bg-gradient-to-r from-[#B41A1D] via-[#B41A1D]/60 to-[#B41A1D] opacity-0 transition group-hover:opacity-100"></div>

          <div class="flex items-start gap-3">
            <span class="icon-wrap grid place-items-center h-10 w-10 rounded-xl bg-[#B41A1D]/10 text-[#B41A1D] transition group-hover:bg-[#B41A1D] group-hover:text-white">
              <!-- usa clases de Font Awesome desde la CDN del layout -->
              <i class="fa-solid fa-circle-check text-lg"></i>
            </span>
            <p class="font-semibold text-[#121212]">{t}</p>
          </div>

          <!-- detalle inferior -->
          <div class="mt-4 h-px w-full bg-[#575756]/10"></div>
          <div class="mt-3 flex items-center gap-2 text-xs text-[#575756]">
            <span class="inline-block h-2 w-2 rounded-full bg-[#B41A1D]"></span>
            <span>Implementación ágil y escalable</span>
          </div>
        </li>
      ))}
    </ul>
  </div>
</section>

<script>
  import gsap from "gsap";
  import ScrollTrigger from "gsap/ScrollTrigger";
  gsap.registerPlugin(ScrollTrigger);

  // Tipado TS
  const cards = Array.from(document.querySelectorAll<HTMLLIElement>(".va-card"));
  const icons = Array.from(document.querySelectorAll<HTMLSpanElement>(".va-card .icon-wrap"));

  // Entrada de cards (stagger)
  cards.forEach((el, idx) => {
    gsap.from(el, {
      opacity: 0,
      y: 18,
      duration: 0.5,
      delay: idx * 0.06,
      ease: "power3.out",
      scrollTrigger: { trigger: el, start: "top 85%", once: true },
    });
  });

  // Microinteracción del ícono (pop) al entrar en viewport
  icons.forEach((wrap) => {
    gsap.fromTo(
      wrap,
      { scale: 0.9 },
      {
        scale: 1,
        duration: 0.35,
        ease: "back.out(2)",
        scrollTrigger: { trigger: wrap, start: "top 90%", once: true },
      }
    );
  });
</script>
