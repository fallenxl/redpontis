<!-- valued added component -->
---
import { Image } from "astro:assets";
import PaaSEnablerIcon from "../assets/paas-enabler-icon.svg";
import SolucionesIntegralesIcon from "../assets/soluciones-integrales-icon.svg";
import CertificacionesPCIIcon from "../assets/certificaciones-pci-icon.svg";
import IsoIcon from "../assets/iso-icon.svg";
import EspecializadosIcon from "../assets/especializados-icon.svg";
import DesarrollosIcon from "../assets/desarrollos-icon.svg";

const items = [
  { text: "Especializados en medios de pago", icon: EspecializadosIcon },
  { text: "PaaS enabler para adquirentes y PFs", icon: PaaSEnablerIcon },
  { text: "Soluciones integrales en marca blanca", icon: SolucionesIntegralesIcon },
  { text: "Desarrollos a medida", icon: DesarrollosIcon },
  { text: "Certificaciones PCI DSS / PCI PIN", icon: CertificacionesPCIIcon },
  { text: "ISO 9001 / ISO 37001", icon: IsoIcon },
];
---

<section id="value-add" class="relative overflow-hidden bg-white">
  <!-- halo decorativo -->
  <div class="pointer-events-none absolute inset-0">
    <div class="absolute -top-20 left-1/2 h-[45rem] w-[45rem] -translate-x-1/2 rounded-full bg-[#B41A1D]/10 blur-3xl"></div>
  </div>

  <div class="relative mx-auto max-w-7xl px-4 md:px-6 py-20">
    <header class="text-center max-w-3xl mx-auto">
      <p
        class="text-xs md:text-sm uppercase tracking-[0.2em] text-[#575756] flex items-center justify-center gap-2"
        
      >
        <span class="inline-block h-[3px] w-8 rounded bg-[#B41A1D]"></span>
        <span data-i18n="valueAdd.kicker">Valor agregado</span>
      </p>

      <h2
        class="heavitas mt-3 text-3xl md:text-5xl leading-tight text-[#121212] text-balance"
        data-i18n="valueAdd.title"
         data-i18n-html
      >
        Más que pagos: <span class="text-[#B41A1D]">una experiencia completa</span>
      </h2>

      <p class="mt-4 text-[#575756] md:text-lg" data-i18n="valueAdd.subtitle">
        Servicios y herramientas que potencian cada transacción, mejorando la eficiencia y la experiencia del usuario.
      </p>
    </header>

    <!-- Íconos grandes en grid -->
    <ul class="mt-16 grid grid-cols-2 md:grid-cols-3 gap-10 md:gap-14">
      {items.map((t, i) => (
        <li class="va-item group flex flex-col items-center text-center">
          <div class="icon-wrap relative grid place-items-center h-28 w-28 rounded-full bg-[#B41A1D]/10 ring-2 ring-[#B41A1D]/20 shadow-md transition group-hover:scale-105">
            <Image
              src={t.icon}
              alt={t.text}
              data-i18n-attr="alt"
              data-i18n-alt={`valueAdd.items.${i}`}
              class="h-14 w-14 object-contain transition "
            />
          </div>
          <p
            class="mt-5  text-[#121212] text-base md:text-lg"
            data-i18n={`valueAdd.items.${i}`}
          >
            {t.text}
          </p>
        </li>
      ))}
    </ul>
  </div>
</section>

<script>
  import gsap from "gsap";
  import ScrollTrigger from "gsap/ScrollTrigger";
  gsap.registerPlugin(ScrollTrigger);

  const items = Array.from(document.querySelectorAll<HTMLLIElement>(".va-item"));

  items.forEach((el, i) => {
    gsap.from(el, {
      opacity: 0,
      y: 30,
      duration: 0.6,
      delay: i * 0.08,
      ease: "power3.out",
      scrollTrigger: { trigger: el, start: "top 85%", once: true },
    });
  });

  // Si el idioma cambia después de montar, re-aplica traducción solo a este bloque
  window.addEventListener("rp:langchange", () => {
    (window as any).rpI18n?.apply?.(document.getElementById("value-add")!);
  });
</script>
