---
// ContactCTA.astro
const action = "/contacto"; // adapta a tu endpoint real
---

<section id="contact" class="relative overflow-hidden bg-[#B41A1D]">
  <!-- decor fondo -->
  <div class="pointer-events-none absolute inset-0">
    <div
      class="absolute -top-24 -left-24 h-[32rem] w-[32rem] rounded-full bg-white/10 blur-3xl"
    >
    </div>
    <div
      class="absolute -bottom-32 -right-24 h-[28rem] w-[28rem] rounded-full bg-[#575756]/20 blur-3xl"
    >
    </div>
  </div>

  <div class="relative mx-auto max-w-6xl px-4 md:px-6 py-16 md:py-24">
    <div
      class="contact-card grid grid-cols-1 overflow-hidden rounded-3xl bg-white/90 backdrop-blur shadow-xl ring-1 ring-black/5"
    >
      <!-- Col info -->
      <aside
        class="relative flex flex-col justify-between items-center bg-white/50 p-8 md:p-10"
      >
        <div>
          <p
            class="text-xs md:text-sm uppercase tracking-widest text-[#575756] flex items-center justify-center gap-2 text-center"
          >
            <span class="inline-block h-[3px] w-8 rounded bg-[#B41A1D]"></span>
            <span data-i18n="contact.kicker">Hablemos</span>
          </p>

          <h2
            class="heavitas mt-2 text-3xl md:text-4xl text-[#B41A1D] leading-tight text-center"
            data-i18n="contact.title"
          >
            ¿Listo para crear?
          </h2>

          <p
            class="mt-3 text-[#575756] text-center"
            data-i18n="contact.desc"
            data-i18n-html
          >
            Cuéntanos tu desafío y te contactaremos pronto. Resolvemos proyectos <span
              class="font-medium">a medida</span
            > para el ecosistema de pagos.
          </p>

          <!-- Bullets -->
          <ul
            class="mt-6 space-y-3 text-[#121212] md:flex items-center gap-4 hidden"
          >
            <li class="flex items-center justify-center gap-3">
              <span
                class="grid place-items-center h-9 w-9 rounded-xl bg-[#B41A1D]/10 text-[#B41A1D]"
                ><i class="fa-solid fa-bolt"></i></span
              >
              <span class="text-sm" data-i18n="contact.bullets.0" data-i18n-html
                ><b>Respuesta ágil</b> y briefing claro.</span
              >
            </li>
            <li class="flex items-center gap-3">
              <span
                class="grid place-items-center h-9 w-9 rounded-xl bg-[#B41A1D]/10 text-[#B41A1D]"
                ><i class="fa-solid fa-shield-halved"></i></span
              >
              <span class="text-sm" data-i18n="contact.bullets.1" data-i18n-html
                >Enfoque <b>seguro</b> y cumplimiento.</span
              >
            </li>
            <li class="flex items-center gap-3">
              <span
                class="grid place-items-center h-9 w-9 rounded-xl bg-[#B41A1D]/10 text-[#B41A1D]"
                ><i class="fa-solid fa-diagram-project"></i></span
              >
              <span class="text-sm" data-i18n="contact.bullets.2" data-i18n-html
                >Implementación <b>escalable</b> y soporte.</span
              >
            </li>
          </ul>
        </div>
        <!-- contact us  -->
        <a
          href="/contacto"
          class="inline-flex items-center justify-center rounded-xl bg-[#B41A1D] px-5 py-3 font-semibold text-white shadow-[0_12px_28px_rgba(180,26,29,0.35)] active:translate-y-px transition mt-4"
        >
          <span data-i18n="footer.cta">Conversemos</span>
          <i class="fa-solid fa-arrow-right ml-2"></i>
        </a>
      </aside>
    </div>
  </div>
</section>

<script>
  import gsap from "gsap";
  import ScrollTrigger from "gsap/ScrollTrigger";
  gsap.registerPlugin(ScrollTrigger);

  const card = document.querySelector<HTMLDivElement>(".contact-card");
  const form = document.querySelector<HTMLFormElement>("#contact form");
  const fields = form
    ? Array.from(form.querySelectorAll<HTMLElement>("label, .cta"))
    : [];

  if (card) {
    gsap.from(card, {
      opacity: 0,
      y: 24,
      duration: 0.6,
      ease: "power3.out",
      scrollTrigger: { trigger: card, start: "top 80%", once: true },
    });
  }

  if (fields.length) {
    gsap.from(fields, {
      opacity: 0,
      y: 12,
      duration: 0.4,
      stagger: 0.06,
      ease: "power2.out",
      scrollTrigger: { trigger: form!, start: "top 85%", once: true },
    });
  }

  // Re-aplicar solo este bloque al cambiar idioma
  window.addEventListener("rp:langchange", () => {
    (window as any).rpI18n?.apply?.(document.getElementById("contact")!);
  });
</script>
