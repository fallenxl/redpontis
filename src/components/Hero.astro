---
/* HeroRedPontis.astro */
const slogan = "#WeCreateToInnovate";
---

<section id="hero" class="relative overflow-hidden bg-white">
  <!-- Decor glows -->
  <div class="pointer-events-none absolute inset-0">
      <!-- Líneas grises decorativas -->
  <div class="absolute inset-0 opacity-[0.70] z-20">
    <!-- Banda izquierda (diagonal) -->
    <div
      class="absolute -left-24 top-[-10%] h-[140%] w-[68%] -skew-y-6 
             [mask-image:linear-gradient(to_right,transparent,black_25%,black_75%,transparent)]
             [background:repeating-linear-gradient( to_bottom,
               rgba(87,87,86,0.18) 0 1px, transparent 1px 22px)]">
    </div>

    <!-- Banda derecha (vertical sutil) -->
    <div
      class="absolute -right-24 bottom-[-10%] h-[140%] w-[56%] skew-y-3
             [mask-image:linear-gradient(to_left,transparent,black_25%,black_75%,transparent)]
             [background:repeating-linear-gradient( 0deg,
               rgba(87,87,86,0.12) 0 1px, transparent 1px 26px)]">
    </div>
  </div>
    <div class="absolute -top-24 left-1/2 h-[44rem] w-[44rem] -translate-x-1/2 rounded-full bg-[#B41A1D]/10 blur-3xl"></div>
    <div class="absolute bottom-[-20%] right-[-10%] h-[36rem] w-[36rem] rounded-full bg-[#575756]/10 blur-3xl"></div>
    <div class="absolute inset-0 [background:radial-gradient(transparent_1px,#ffffff_1px)] [background-size:28px_28px] opacity-[0.35]"></div>
  </div>

  <div class="relative mx-auto max-w-7xl px-4 md:px-6 pt-28 md:pt-36 pb-16 md:pb-28">
    <div class="grid grid-cols-1 lg:grid-cols-12 gap-12 items-center">
      <!-- Col Texto -->
      <div class="lg:col-span-7">
        <!-- Badge -->
        <p class="inline-flex items-center gap-2 rounded-full border border-[#575756]/30 px-3 py-1 text-xs md:text-sm text-[#575756]">
          <span class="h-2 w-2 rounded-full bg-[#B41A1D]"></span>
          Fábrica de software para medios de pago
        </p>

        <!-- Headline -->
        <h1 class="mt-5 text-4xl md:text-5xl font-black leading-tight tracking-tight text-[#121212] heavitas">
          Lideramos la evolución del <span class="text-[#B41A1D]">ecosistema de pagos</span>.
        </h1>

        <!-- Lead -->
        <p class="mt-5 max-w-2xl text-base md:text-lg text-[#575756]">
          Soluciones innovadoras, ágiles y flexibles para optimizar operaciones, mejorar la experiencia del cliente
          e integrar tecnología avanzada con un enfoque estratégico en cada transacción.
        </p>

        <!-- Hashtag -->
        <div class="mt-8">
          <h2 id="hashtag" class="select-none font-black tracking-tight text-2xl md:text-3xl heavitas">
            <span class="hash-chunk text-[#121212]">#WeCreate</span>
            <span class="hash-chunk hash-accent text-[#B41A1D]">ToInnovate</span>
          </h2>
          <p class="mt-2 text-sm text-[#575756]">Innovación con propósito: de la idea al despliegue.</p>
        </div>

        <!-- CTAs -->
        <div class="mt-8 flex flex-wrap gap-3">
          <a
            href="/fabrica"
            class="inline-flex items-center justify-center rounded-xl bg-[#B41A1D] px-6 py-3 text-white font-semibold shadow-[0_12px_28px_rgba(180,26,29,0.35)] transition hover:scale-[1.02] active:translate-y-[1px]"
          >
            Ver soluciones
          </a>
          <a
            href="/contacto"
            class="inline-flex items-center justify-center rounded-xl border border-[#575756]/30 px-6 py-3 text-[#575756] hover:bg-[#575756]/10 font-semibold transition"
          >
            Contáctanos
          </a>
        </div>

        <!-- Chips -->
        <div class="mt-8 flex flex-wrap gap-2">
          {[
            "eCore Switch","Payment Gateway","Tap to Phone","Cobros Recurrentes",
            "Billetera Móvil","Tokenización","Real Time Payments","Generador de QR"
          ].map((item) => (
            <span class="sol-chip inline-flex items-center rounded-full border border-[#575756]/30 bg-white/80 px-3 py-1 text-xs text-[#575756] backdrop-blur hover:border-[#B41A1D]/50 hover:text-[#B41A1D] transition">
              {item}
            </span>
          ))}
        </div>
      </div>

      <!-- Col Tarjeta -->
      <div class="lg:col-span-5">
        <div id="card" class="relative mx-auto w-full max-w-md rounded-3xl border border-[#575756]/20 bg-white p-8 shadow-xl">
          <div class="absolute -top-10 -right-10 h-40 w-40 rounded-full bg-[#B41A1D]/15 blur-2xl"></div>
          <h3 class="text-xl heavitas text-[#121212]">Más que pagos, valor real</h3>
          <p class="mt-3 text-sm text-[#575756]">
            Diseñamos, construimos y desplegamos plataformas seguras y escalables
            para adquirentes, fintechs y comercios.
          </p>
          <ul class="mt-5 space-y-2 text-sm">
            <li class="flex items-center gap-2"><span class="h-1.5 w-1.5 rounded-full bg-[#B41A1D]"></span> Certificaciones PCI DSS / PCI PIN</li>
            <li class="flex items-center gap-2"><span class="h-1.5 w-1.5 rounded-full bg-[#B41A1D]"></span> ISO 9001 / ISO 37001</li>
            <li class="flex items-center gap-2"><span class="h-1.5 w-1.5 rounded-full bg-[#B41A1D]"></span> Soluciones “marca blanca” y a medida</li>
          </ul>
          <a
            href="/nosotros"
            class="mt-6 inline-flex rounded-xl border border-[#575756]/30 px-4 py-2 text-sm font-semibold text-[#575756] hover:bg-[#575756]/10 transition"
          >
            Conócenos
          </a>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  import gsap from "gsap";

  // Split letters
  function splitLetters(el: HTMLElement): HTMLSpanElement[] {
    const text = el.textContent ?? "";
    el.textContent = "";
    const frag = document.createDocumentFragment();
    const chars: HTMLSpanElement[] = [];
    for (const ch of text) {
      const span = document.createElement("span");
      span.className = "inline-block will-change-transform";
      span.textContent = ch;
      frag.appendChild(span);
      chars.push(span);
    }
    el.appendChild(frag);
    return chars;
  }

  const hashtag = document.querySelector<HTMLHeadingElement>("#hashtag")!;
  const chunks = Array.from(hashtag.querySelectorAll<HTMLElement>(".hash-chunk"));
  const chips = Array.from(document.querySelectorAll<HTMLSpanElement>(".sol-chip"));
  const card = document.querySelector<HTMLDivElement>("#card")!;

  const tl = gsap.timeline({ defaults: { ease: "power3.out" } });
  tl.from("#hero h1", { y: 20, opacity: 0, duration: 0.6 })
    .from("#hero p", { y: 12, opacity: 0, duration: 0.4, stagger: 0.08 }, "<10%");

  // Hashtag animación letra por letra
  const letters: HTMLSpanElement[] = [];
  for (const c of chunks) letters.push(...splitLetters(c));
  tl.from(letters, { y: 18, opacity: 0, rotate: 3, duration: 0.6, stagger: 0.025 }, "<10%");

  // Chips
  tl.from(chips, { y: 12, opacity: 0, duration: 0.35, stagger: 0.03 }, "<20%");

  // Tarjeta flotante
  tl.from(card, { y: 24, opacity: 0, duration: 0.5 }, "<10%");
  gsap.to(card, { y: -8, duration: 2.5, repeat: -1, yoyo: true, ease: "sine.inOut" });

  // Pulso en “ToInnovate”
  const accent = hashtag.querySelector<HTMLElement>(".hash-accent")!;
  gsap.to(accent, {
    filter: "brightness(1.25)",
    duration: 1.2,
    repeat: -1,
    yoyo: true,
    ease: "sine.inOut",
  });
</script>
